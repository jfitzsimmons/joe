let color,circles=[],count=0,canvas2=document.getElementById("bg2"),ctx2=canvas2.getContext("2d");const movement=["rotate","move","move2","rotate"],colors=[209,291,263],strokeColors=["#506EE5","#68B2F8","#7037CD"],canvas={element:document.getElementById("bg"),width:window.innerWidth,height:window.innerHeight,initialize:function(){circles.length=0,count=0,this.width=window.innerWidth,this.height=window.innerHeight,this.element.style.width=`${this.width}px`,this.element.style.height=`${this.height}px`,ctx2.canvas.width=this.width,ctx2.canvas.height=this.height,ctx2.canvas.style.width=this.width,ctx2.canvas.style.height=this.height,document.body.appendChild(this.element)}};let Circle={create:function(t,e,i,n,s){let a=Object.create(this);return a.id=t,a.ani=e,a.radius=0,a.randomRad=s[0],a.radiusStroke=s[0]+3,a.x=rndmRng(canvas.width-30,30),a.y=rndmRng(canvas.height-30,30),a.curr=0,a.strokeStyle=rndmArrI(strokeColors),a.light=rndmRng(60,10),a.start=Math.random()*Math.PI*2,a.speed=rndmRng(8,1),a.xform=s,a.dx=Math.cos(a.start)/a.speed,a.dy=Math.sin(a.start)/a.speed,a.element=document.createElement("div"),jQuery(a.element).css({width:`${a.radius}px`,height:`${a.radius}px`,backgroundColor:`hsl(${s[2]},100%, ${s[1]}%)`,left:`${a.x}px`,top:`${a.y}px`}),a.element.classList.add("circle"),canvas.element.appendChild(a.element),a},draw:function(t){this.radius<this.randomRad&&void 0!==this.radius?(this.radius+=this.randomRad/80,jQuery(this.element).css({width:`${this.radius}px`,height:`${this.radius}px`,backgroundColor:`hsl(${this.xform[2]+=.3},100%,${this.xform[1]+=.3}%)`}),requestAnimationFrame(()=>this.draw(t))):(ctx2.lineWidth=2,ctx2.strokeStyle=this.strokeStyle,this.setStart(t))},setStart:function(t){"rotate"===this.ani?this.x>canvas.width/2?this.start=4.7:this.start=1.6:"move2"===this.ani&&(this.x>canvas.width/2&&this.y>canvas.height/2?this.start=.9:this.x<canvas.width/2&&this.y>canvas.height/2?this.start=2.5:this.x<canvas.width/2&&this.y<canvas.height/2?this.start=3.8:this.start=5.6),requestAnimationFrame(()=>this.addStroke(t))},addStroke:function(t,e){if(ctx2.beginPath(),ctx2.arc(this.x+this.radius/2,this.y+this.radius/2,this.radius/2+4,this.start,e,!1),ctx2.stroke(),this.curr+=1.7,this.curr<101)requestAnimationFrame(function(){t.addStroke(t,2*Math.PI*t.curr/100+t.start)});else{let e=3.3*this.radiusStroke;ctx2.clearRect(this.x-e/2,this.y-e/2,e,e),jQuery(this.element).css({boxShadow:`0 0 0 3px ${this.strokeStyle}`,border:"3px solid #1D0C20",left:`${this.x-=3}px`,top:`${this.y-=3}px`}),"rotate"===this.ani&&requestAnimationFrame(()=>this.rotate(t)),"move"===this.ani&&requestAnimationFrame(()=>this.move(t)),"move2"===this.ani&&requestAnimationFrame(()=>this.move2(t)),circles.length>0&&newCircle()}},move2:function(t){this.x>canvas.width/2&&this.y>canvas.height/2?this.element.style.animation=`moveL ${rndmRng(350,30)}s linear 0s infinite\n       alternate, moveU ${rndmRng(350,30)}s linear 0s infinite alternate`:this.x<canvas.width/2&&this.y>canvas.height/2?this.element.style.animation=`moveR ${rndmRng(350,30)}s linear 0s infinite\n       alternate, moveU ${rndmRng(350,30)}s linear 0s infinite alternate`:this.x<canvas.width/2&&this.y<canvas.height/2?this.element.style.animation=`moveR ${rndmRng(350,30)}s linear 0s infinite\n       alternate, moveD ${rndmRng(350,30)}s linear 0s infinite alternate`:this.element.style.animation=`moveL ${rndmRng(350,30)}s linear 0s infinite\n       alternate, moveD ${rndmRng(350,30)}s linear 0s infinite alternate`,this.element.classList.add("circle-2")},move:function(t){(this.x>canvas.width-(this.randomRad+10)||this.x<0)&&(this.dx=-this.dx),(this.y>canvas.height-(this.randomRad+10)||this.y<0)&&(this.dy=-this.dy),this.x-=this.dx,this.y-=this.dy,jQuery(this.element).css({top:`${this.y}px`,left:`${this.x}px`}),requestAnimationFrame(()=>this.move(t))},rotate:function(t){let e=1e3/(Math.abs(this.y-canvas.height/2)+100)*150;this.x>canvas.width/2?this.element.style.transformOrigin=`-${e}% center`:this.element.style.transformOrigin=`${e}% center`,this.element.classList.add("circle-2")}};const circleInit=t=>requestAnimationFrame(()=>t.draw(t)),rndmRngArr=(t,e,i)=>[t,e,i],rndmRng=(t,e)=>Math.random()*(t-e)+e,rndmArrI=t=>t[Math.floor(Math.random()*t.length)];function newCircle(){let t=Math.round(canvas.width*canvas.height/3e4);color=rndmArrI(colors),circles.length<t&&(circles.push(Circle.create(count,rndmArrI(movement),rndmRng(2,-2),rndmRng(2,-2),rndmRngArr(rndmRng(25,8),rndmRng(60,10),rndmRng(color,color-60)))),circleInit(circles[count]),count++)}let timeout=!1;function doneResizing(){let t=document.getElementsByClassName("circle");for(;t[0];)t[0].parentNode.removeChild(t[0]);canvas.initialize(),console.log("doneresizing: "+circles.length),newCircle()}window.addEventListener("resize",function(){clearTimeout(timeout),timeout=setTimeout(doneResizing,800)}),canvas.initialize(),newCircle();
